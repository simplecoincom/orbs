description: >
  runs a semantic-release on the defined release branch 

docker:
   - image: circleci/node:16.3.0

parameters:
  release-branch:
    type: string
    default: "master"
    description: "Branch to trigger semantic-release on"

steps:
  - semantic-release:
        description: |
          Create git tags according to the semantics of the commits. Can aslo tag docker images. Should be run in a node executor
        steps:
          - checkout:
              path: ~/project
          - run:
              command: npx semantic-release@v17.4.4 -b << parameters.release-branch >>
              name: Run semantic-versioning
        working_directory: ~/project